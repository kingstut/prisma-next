"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/surveys/survey-api";
exports.ids = ["pages/api/surveys/survey-api"];
exports.modules = {

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./helpers/response-creator.js":
/*!*************************************!*\
  !*** ./helpers/response-creator.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"responseRepo\": () => (/* binding */ responseRepo)\n/* harmony export */ });\n/* harmony import */ var _survey_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./survey-creator */ \"(api)/./helpers/survey-creator.js\");\n/* harmony import */ var _user_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user-creator */ \"(api)/./helpers/user-creator.js\");\n\n\nconst fs = __webpack_require__(/*! fs */ \"fs\");\n// users in JSON file for simplicity, store in a db for production applications\nlet responses = __webpack_require__(/*! ../data/responses.json */ \"(api)/./data/responses.json\");\nconst responseRepo = {\n    getAllresponses: ()=>responses,\n    getResponseBySurveyId: (survey_id)=>responses.find((x)=>x.survey_id.toString() === survey_id.toString()),\n    findResponse: (x)=>responses.find(x),\n    createResponse,\n    addToVerified\n};\nfunction createResponse(survey_id, response) {\n    this_survey = getResponseBySurveyId(survey_id);\n    if (response.length === 0) {\n        this_survey.survey_res = [];\n    } else {\n        const new_res = {\n            user_id: response.user_id,\n            answer: response.answer,\n            verified: [],\n            valid: 0\n        };\n        // add and save res\n        this_survey.survey_res.push(new_res);\n        // add res for user \n        _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.addNewRes(response.user_id, survey_id);\n        //stop showing this survey to this user\n        _survey_creator__WEBPACK_IMPORTED_MODULE_0__.surveyRepo.removeUser(survey_id, response.user_id);\n    }\n    saveData();\n}\nfunction addToVerified(survey_id, user_id, verifier_id, verification) {\n    this_reslist = getResponseBySurveyId(survey_id).survey_res;\n    this_res = this_reslist.find((x)=>x.user_id.toString() === user_id.toString());\n    this_res.verified.push({\n        verifier_id: verifier_id,\n        verification: verification\n    });\n    if (this_res.verified.length === 3) {\n        let num_zero = 0;\n        for (v of this_res.verified){\n            if (v.verification === 0) {\n                num_zero++;\n            }\n        }\n        if (num_zero > 1) {\n            this_res.valid = -1;\n            //don't pay user \n            _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.updateResponded(user_id, survey_id, -1);\n            _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.checkPayment(user_id);\n            //pay those who verified zero, don't pay those who verified one\n            for (v of this_res.verified){\n                value = v.verification === 0 ? 1 : -1;\n                _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.updateResponded(v.verifier_id, survey_id, value);\n                _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.checkPayment(v.verifier_id);\n            }\n        } else {\n            this_res.valid = 1;\n            //pay user \n            _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.updateResponded(user_id, survey_id, 1);\n            _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.checkPayment(user_id);\n            //pay those who verified one, don't pay those who verified zero\n            for (v of this_res.verified){\n                val = v.verification === 1 ? 1 : -1;\n                _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.updateResponded(v.verifier_id, survey_id, value);\n                _user_creator__WEBPACK_IMPORTED_MODULE_1__.userRepo.checkPayment(v.verifier_id);\n            }\n            //push to valid responses in survey \n            _survey_creator__WEBPACK_IMPORTED_MODULE_0__.surveyRepo.addValidResponse(survey_id, this_res.answer);\n        }\n        //delete this response from responses \n        const index = this_reslist.indexOf(this_res);\n        delete this_reslist[index];\n    }\n    saveData();\n}\n// private helper functions\nfunction saveData() {\n    fs.writeFileSync(\"data/responses.json\", JSON.stringify(responses, null, 4));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0NBQXNDO1FBQ3RDLE1BQU1rQixRQUFRVCxhQUFhVSxPQUFPLENBQUNUO1FBQ25DLE9BQU9ELFlBQVksQ0FBQ1MsTUFBTTtJQUU5QixDQUFDO0lBRURaO0FBQ0o7QUFHQSwyQkFBMkI7QUFDM0IsU0FBU0EsV0FBVztJQUNoQnpCLEdBQUd1QyxhQUFhLENBQUMsdUJBQXVCQyxLQUFLQyxTQUFTLENBQUN2QyxXQUFXLElBQUksRUFBRTtBQUM1RSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXNtYS1uZXh0Ly4vaGVscGVycy9yZXNwb25zZS1jcmVhdG9yLmpzPzE5YjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VydmV5UmVwbyB9IGZyb20gJy4vc3VydmV5LWNyZWF0b3InO1xuaW1wb3J0IHsgdXNlclJlcG8gfSBmcm9tICcuL3VzZXItY3JlYXRvcic7XG5cbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuLy8gdXNlcnMgaW4gSlNPTiBmaWxlIGZvciBzaW1wbGljaXR5LCBzdG9yZSBpbiBhIGRiIGZvciBwcm9kdWN0aW9uIGFwcGxpY2F0aW9uc1xubGV0IHJlc3BvbnNlcz0gcmVxdWlyZSgnLi4vZGF0YS9yZXNwb25zZXMuanNvbicpO1xuXG5leHBvcnQgY29uc3QgcmVzcG9uc2VSZXBvID0ge1xuICAgIGdldEFsbHJlc3BvbnNlczogKCkgPT4gcmVzcG9uc2VzLFxuICAgIGdldFJlc3BvbnNlQnlTdXJ2ZXlJZDogc3VydmV5X2lkID0+IHJlc3BvbnNlcy5maW5kKHggPT4geC5zdXJ2ZXlfaWQudG9TdHJpbmcoKSA9PT0gc3VydmV5X2lkLnRvU3RyaW5nKCkpLFxuICAgIGZpbmRSZXNwb25zZTogeCA9PiByZXNwb25zZXMuZmluZCh4KSxcbiAgICBjcmVhdGVSZXNwb25zZSxcbiAgICBhZGRUb1ZlcmlmaWVkXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZShzdXJ2ZXlfaWQsIHJlc3BvbnNlKSB7XG4gICAgdGhpc19zdXJ2ZXkgPSBnZXRSZXNwb25zZUJ5U3VydmV5SWQoc3VydmV5X2lkKVxuICAgIGlmIChyZXNwb25zZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpc19zdXJ2ZXkuc3VydmV5X3JlcyA9IFtdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICBjb25zdCBuZXdfcmVzICA9IHsgdXNlcl9pZDogcmVzcG9uc2UudXNlcl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcjogcmVzcG9uc2UuYW5zd2VyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBbXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZDogMH1cbiAgICAvLyBhZGQgYW5kIHNhdmUgcmVzXG4gICAgdGhpc19zdXJ2ZXkuc3VydmV5X3Jlcy5wdXNoKG5ld19yZXMpXG5cbiAgICAvLyBhZGQgcmVzIGZvciB1c2VyIFxuICAgIHVzZXJSZXBvLmFkZE5ld1JlcyhyZXNwb25zZS51c2VyX2lkLCBzdXJ2ZXlfaWQpXG4gICAgXG4gICAgLy9zdG9wIHNob3dpbmcgdGhpcyBzdXJ2ZXkgdG8gdGhpcyB1c2VyXG4gICAgc3VydmV5UmVwby5yZW1vdmVVc2VyKHN1cnZleV9pZCwgcmVzcG9uc2UudXNlcl9pZClcbiAgICB9XG4gICAgc2F2ZURhdGEoKVxufVxuXG5mdW5jdGlvbiBhZGRUb1ZlcmlmaWVkKHN1cnZleV9pZCwgdXNlcl9pZCwgdmVyaWZpZXJfaWQsIHZlcmlmaWNhdGlvbikge1xuICAgIHRoaXNfcmVzbGlzdCA9IGdldFJlc3BvbnNlQnlTdXJ2ZXlJZChzdXJ2ZXlfaWQpLnN1cnZleV9yZXNcbiAgICB0aGlzX3JlcyA9IHRoaXNfcmVzbGlzdC5maW5kKHggPT4geC51c2VyX2lkLnRvU3RyaW5nKCkgPT09IHVzZXJfaWQudG9TdHJpbmcoKSlcblxuICAgIHRoaXNfcmVzLnZlcmlmaWVkLnB1c2goe3ZlcmlmaWVyX2lkOiB2ZXJpZmllcl9pZCwgdmVyaWZpY2F0aW9uOiB2ZXJpZmljYXRpb259KVxuXG4gICAgaWYgKHRoaXNfcmVzLnZlcmlmaWVkLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBsZXQgbnVtX3plcm8gPSAwIFxuICAgICAgICBmb3IgKHYgb2YgdGhpc19yZXMudmVyaWZpZWQpIHtcbiAgICAgICAgICAgIGlmICh2LnZlcmlmaWNhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG51bV96ZXJvKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bV96ZXJvPjEpIHtcbiAgICAgICAgICAgIHRoaXNfcmVzLnZhbGlkID0gLTFcblxuICAgICAgICAgICAgLy9kb24ndCBwYXkgdXNlciBcbiAgICAgICAgICAgIHVzZXJSZXBvLnVwZGF0ZVJlc3BvbmRlZCh1c2VyX2lkLCBzdXJ2ZXlfaWQsIC0xKVxuICAgICAgICAgICAgdXNlclJlcG8uY2hlY2tQYXltZW50KHVzZXJfaWQpXG5cbiAgICAgICAgICAgIC8vcGF5IHRob3NlIHdobyB2ZXJpZmllZCB6ZXJvLCBkb24ndCBwYXkgdGhvc2Ugd2hvIHZlcmlmaWVkIG9uZVxuICAgICAgICAgICAgZm9yICh2IG9mIHRoaXNfcmVzLnZlcmlmaWVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2LnZlcmlmaWNhdGlvbiA9PT0gMCA/IDEgOiAtMSAgXG4gICAgICAgICAgICAgICAgdXNlclJlcG8udXBkYXRlUmVzcG9uZGVkKHYudmVyaWZpZXJfaWQsIHN1cnZleV9pZCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgdXNlclJlcG8uY2hlY2tQYXltZW50KHYudmVyaWZpZXJfaWQpXG4gICAgICAgICAgICB9ICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpc19yZXMudmFsaWQgPSAxXG5cbiAgICAgICAgICAgIC8vcGF5IHVzZXIgXG4gICAgICAgICAgICB1c2VyUmVwby51cGRhdGVSZXNwb25kZWQodXNlcl9pZCwgc3VydmV5X2lkLCAxKVxuICAgICAgICAgICAgdXNlclJlcG8uY2hlY2tQYXltZW50KHVzZXJfaWQpXG5cbiAgICAgICAgICAgIC8vcGF5IHRob3NlIHdobyB2ZXJpZmllZCBvbmUsIGRvbid0IHBheSB0aG9zZSB3aG8gdmVyaWZpZWQgemVyb1xuICAgICAgICAgICAgZm9yICh2IG9mIHRoaXNfcmVzLnZlcmlmaWVkKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdi52ZXJpZmljYXRpb24gPT09IDEgPyAxIDogLTEgICAgXG4gICAgICAgICAgICAgICAgdXNlclJlcG8udXBkYXRlUmVzcG9uZGVkKHYudmVyaWZpZXJfaWQsIHN1cnZleV9pZCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgdXNlclJlcG8uY2hlY2tQYXltZW50KHYudmVyaWZpZXJfaWQpICAgICAgICAgXG4gICAgICAgICAgICB9ICAgXG5cbiAgICAgICAgICAgIC8vcHVzaCB0byB2YWxpZCByZXNwb25zZXMgaW4gc3VydmV5IFxuICAgICAgICAgICAgc3VydmV5UmVwby5hZGRWYWxpZFJlc3BvbnNlKHN1cnZleV9pZCwgdGhpc19yZXMuYW5zd2VyKVxuICAgICAgICB9XG5cbiAgICAgICAgLy9kZWxldGUgdGhpcyByZXNwb25zZSBmcm9tIHJlc3BvbnNlcyBcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzX3Jlc2xpc3QuaW5kZXhPZih0aGlzX3Jlcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzX3Jlc2xpc3RbaW5kZXhdO1xuXG4gICAgfVxuICAgIFxuICAgIHNhdmVEYXRhKClcbn1cblxuXG4vLyBwcml2YXRlIGhlbHBlciBmdW5jdGlvbnNcbmZ1bmN0aW9uIHNhdmVEYXRhKCkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoJ2RhdGEvcmVzcG9uc2VzLmpzb24nLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZXMsIG51bGwsIDQpKVxufSJdLCJuYW1lcyI6WyJzdXJ2ZXlSZXBvIiwidXNlclJlcG8iLCJmcyIsInJlcXVpcmUiLCJyZXNwb25zZXMiLCJyZXNwb25zZVJlcG8iLCJnZXRBbGxyZXNwb25zZXMiLCJnZXRSZXNwb25zZUJ5U3VydmV5SWQiLCJzdXJ2ZXlfaWQiLCJmaW5kIiwieCIsInRvU3RyaW5nIiwiZmluZFJlc3BvbnNlIiwiY3JlYXRlUmVzcG9uc2UiLCJhZGRUb1ZlcmlmaWVkIiwicmVzcG9uc2UiLCJ0aGlzX3N1cnZleSIsImxlbmd0aCIsInN1cnZleV9yZXMiLCJuZXdfcmVzIiwidXNlcl9pZCIsImFuc3dlciIsInZlcmlmaWVkIiwidmFsaWQiLCJwdXNoIiwiYWRkTmV3UmVzIiwicmVtb3ZlVXNlciIsInNhdmVEYXRhIiwidmVyaWZpZXJfaWQiLCJ2ZXJpZmljYXRpb24iLCJ0aGlzX3Jlc2xpc3QiLCJ0aGlzX3JlcyIsIm51bV96ZXJvIiwidiIsInVwZGF0ZVJlc3BvbmRlZCIsImNoZWNrUGF5bWVudCIsInZhbHVlIiwidmFsIiwiYWRkVmFsaWRSZXNwb25zZSIsImluZGV4IiwiaW5kZXhPZiIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./helpers/response-creator.js\n");

/***/ }),

/***/ "(api)/./helpers/survey-creator.js":
/*!***********************************!*\
  !*** ./helpers/survey-creator.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"surveyRepo\": () => (/* binding */ surveyRepo)\n/* harmony export */ });\n/* harmony import */ var _user_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./user-creator */ \"(api)/./helpers/user-creator.js\");\n/* harmony import */ var _response_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./response-creator */ \"(api)/./helpers/response-creator.js\");\n\n\nconst fs = __webpack_require__(/*! fs */ \"fs\");\n// users in JSON file for simplicity, store in a db for production applications\nlet surveys = __webpack_require__(/*! ../data/surveys.json */ \"(api)/./data/surveys.json\");\nconst surveyRepo = {\n    getAllSurveys: ()=>surveys,\n    getSurveyById: (survey_id)=>surveys.find((x)=>x.survey_id.toString() === survey_id.toString()),\n    getSurveyByUser: (user_id)=>surveys.find((x)=>x.user_id.toString() === user_id.toString()),\n    findSurvey: (x)=>surveys.find(x),\n    createSurvey,\n    addValidResponse,\n    closeSurvey,\n    getValidSurveys: (user_id)=>surveys.find((x)=>x.show_to_users.includes(user_id)),\n    removeUser\n};\nfunction createSurvey(survey, session) {\n    // generate new survey id\n    survey.survey_id = surveys.length ? Math.max(...surveys.map((x)=>x.id)) + 1 : 1;\n    survey.user_id = session.user.email;\n    survey.question = survey.question;\n    survey.show_to_users = _user_creator__WEBPACK_IMPORTED_MODULE_0__.userRepo.getAllUsers().map((user)=>user.user_id);\n    survey.closed = false;\n    survey.budget = survey.budget;\n    survey.cpr = survey.cpr;\n    survey.verified_res = [];\n    // add and save user\n    surveys.push(survey);\n    _response_creator__WEBPACK_IMPORTED_MODULE_1__.responseRepo.createResponse(survey.survey_id, []);\n    saveData();\n}\nfunction addValidResponse(survey_id, answer) {\n    this_survey = getSurveyById(survey_id);\n    this_survey.verified_res.push(answer);\n    if (this_survey.verified_res.length >= this_survey.budget / this_survey.cpr) {\n        closeSurvey(survey_id);\n    }\n    saveData();\n}\nfunction closeSurvey(survey_id) {\n    this_survey = getSurveyById(survey_id);\n    this_survey.closed = true;\n    saveData();\n}\nfunction removeUser(survey_id, user_id) {\n    urv = surveyRepo.getSurveyById(survey_id);\n    const index = surv.show_to_users.indexOf(user_id);\n    delete surv.show_to_users[index];\n    saveData();\n}\n// private helper functions\nfunction saveData() {\n    fs.writeFileSync(\"data/surveys.json\", JSON.stringify(surveys, null, 4));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9oZWxwZXJzL3N1cnZleS1jcmVhdG9yLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3QztBQUNVO0FBQ2xELE1BQU1FLEtBQUtDLG1CQUFPQSxDQUFDO0FBRW5CLCtFQUErRTtBQUMvRSxJQUFJQyxVQUFTRCxtQkFBT0EsQ0FBQztBQUVkLE1BQU1FLGFBQWE7SUFDdEJDLGVBQWUsSUFBTUY7SUFDckJHLGVBQWVDLENBQUFBLFlBQWFKLFFBQVFLLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUYsU0FBUyxDQUFDRyxRQUFRLE9BQU9ILFVBQVVHLFFBQVE7SUFDM0ZDLGlCQUFpQkMsQ0FBQUEsVUFBV1QsUUFBUUssSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFRyxPQUFPLENBQUNGLFFBQVEsT0FBT0UsUUFBUUYsUUFBUTtJQUN2RkcsWUFBWUosQ0FBQUEsSUFBS04sUUFBUUssSUFBSSxDQUFDQztJQUM5Qks7SUFDQUM7SUFDQUM7SUFDQUMsaUJBQWlCTCxDQUFBQSxVQUFXVCxRQUFRSyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVTLGFBQWEsQ0FBQ0MsUUFBUSxDQUFDUDtJQUN2RVE7QUFDSixFQUFFO0FBRUYsU0FBU04sYUFBYU8sTUFBTSxFQUFFQyxPQUFPLEVBQUU7SUFDbkMseUJBQXlCO0lBQ3pCRCxPQUFPZCxTQUFTLEdBQUdKLFFBQVFvQixNQUFNLEdBQUdDLEtBQUtDLEdBQUcsSUFBSXRCLFFBQVF1QixHQUFHLENBQUNqQixDQUFBQSxJQUFLQSxFQUFFa0IsRUFBRSxLQUFLLElBQUksQ0FBQztJQUMvRU4sT0FBT1QsT0FBTyxHQUFHVSxRQUFRTSxJQUFJLENBQUNDLEtBQUs7SUFDbkNSLE9BQU9TLFFBQVEsR0FBR1QsT0FBT1MsUUFBUTtJQUNqQ1QsT0FBT0gsYUFBYSxHQUFHbkIsK0RBQW9CLEdBQUcyQixHQUFHLENBQUMsQ0FBQ0UsT0FBU0EsS0FBS2hCLE9BQU87SUFDeEVTLE9BQU9XLE1BQU0sR0FBRyxLQUFLO0lBQ3JCWCxPQUFPWSxNQUFNLEdBQUdaLE9BQU9ZLE1BQU07SUFDN0JaLE9BQU9hLEdBQUcsR0FBR2IsT0FBT2EsR0FBRztJQUN2QmIsT0FBT2MsWUFBWSxHQUFHLEVBQUU7SUFFeEIsb0JBQW9CO0lBQ3BCaEMsUUFBUWlDLElBQUksQ0FBQ2Y7SUFFYnJCLDBFQUEyQixDQUFDcUIsT0FBT2QsU0FBUyxFQUFFLEVBQUU7SUFDaEQrQjtBQUNKO0FBR0EsU0FBU3ZCLGlCQUFpQlIsU0FBUyxFQUFFZ0MsTUFBTSxFQUFFO0lBQ3pDQyxjQUFjbEMsY0FBY0M7SUFDNUJpQyxZQUFZTCxZQUFZLENBQUNDLElBQUksQ0FBQ0c7SUFDOUIsSUFBSUMsWUFBWUwsWUFBWSxDQUFDWixNQUFNLElBQUlpQixZQUFZUCxNQUFNLEdBQUNPLFlBQVlOLEdBQUcsRUFBQztRQUN0RWxCLFlBQVlUO0lBQ2hCLENBQUM7SUFDRCtCO0FBQ0o7QUFFQSxTQUFTdEIsWUFBWVQsU0FBUyxFQUFFO0lBQzVCaUMsY0FBY2xDLGNBQWNDO0lBQzVCaUMsWUFBWVIsTUFBTSxHQUFHLElBQUk7SUFDekJNO0FBQ0o7QUFFQSxTQUFTbEIsV0FBV2IsU0FBUyxFQUFFSyxPQUFPLEVBQUM7SUFDbkM2QixNQUFNckMsV0FBV0UsYUFBYSxDQUFDQztJQUMvQixNQUFNbUMsUUFBUUMsS0FBS3pCLGFBQWEsQ0FBQzBCLE9BQU8sQ0FBQ2hDO0lBQ3pDLE9BQU8rQixLQUFLekIsYUFBYSxDQUFDd0IsTUFBTTtJQUNoQ0o7QUFDSjtBQUVBLDJCQUEyQjtBQUMzQixTQUFTQSxXQUFXO0lBQ2hCckMsR0FBRzRDLGFBQWEsQ0FBQyxxQkFBcUJDLEtBQUtDLFNBQVMsQ0FBQzVDLFNBQVMsSUFBSSxFQUFFO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpc21hLW5leHQvLi9oZWxwZXJzL3N1cnZleS1jcmVhdG9yLmpzP2EzYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt1c2VyUmVwb30gZnJvbSAnLi91c2VyLWNyZWF0b3InO1xuaW1wb3J0IHsgcmVzcG9uc2VSZXBvIH0gZnJvbSAnLi9yZXNwb25zZS1jcmVhdG9yJztcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuLy8gdXNlcnMgaW4gSlNPTiBmaWxlIGZvciBzaW1wbGljaXR5LCBzdG9yZSBpbiBhIGRiIGZvciBwcm9kdWN0aW9uIGFwcGxpY2F0aW9uc1xubGV0IHN1cnZleXM9IHJlcXVpcmUoJy4uL2RhdGEvc3VydmV5cy5qc29uJyk7XG5cbmV4cG9ydCBjb25zdCBzdXJ2ZXlSZXBvID0ge1xuICAgIGdldEFsbFN1cnZleXM6ICgpID0+IHN1cnZleXMsXG4gICAgZ2V0U3VydmV5QnlJZDogc3VydmV5X2lkID0+IHN1cnZleXMuZmluZCh4ID0+IHguc3VydmV5X2lkLnRvU3RyaW5nKCkgPT09IHN1cnZleV9pZC50b1N0cmluZygpKSxcbiAgICBnZXRTdXJ2ZXlCeVVzZXI6IHVzZXJfaWQgPT4gc3VydmV5cy5maW5kKHggPT4geC51c2VyX2lkLnRvU3RyaW5nKCkgPT09IHVzZXJfaWQudG9TdHJpbmcoKSksXG4gICAgZmluZFN1cnZleTogeCA9PiBzdXJ2ZXlzLmZpbmQoeCksXG4gICAgY3JlYXRlU3VydmV5LFxuICAgIGFkZFZhbGlkUmVzcG9uc2UsXG4gICAgY2xvc2VTdXJ2ZXksXG4gICAgZ2V0VmFsaWRTdXJ2ZXlzOiB1c2VyX2lkID0+IHN1cnZleXMuZmluZCh4ID0+IHguc2hvd190b191c2Vycy5pbmNsdWRlcyh1c2VyX2lkKSksXG4gICAgcmVtb3ZlVXNlclxufTtcblxuZnVuY3Rpb24gY3JlYXRlU3VydmV5KHN1cnZleSwgc2Vzc2lvbikge1xuICAgIC8vIGdlbmVyYXRlIG5ldyBzdXJ2ZXkgaWRcbiAgICBzdXJ2ZXkuc3VydmV5X2lkID0gc3VydmV5cy5sZW5ndGggPyBNYXRoLm1heCguLi5zdXJ2ZXlzLm1hcCh4ID0+IHguaWQpKSArIDEgOiAxO1xuICAgIHN1cnZleS51c2VyX2lkID0gc2Vzc2lvbi51c2VyLmVtYWlsXG4gICAgc3VydmV5LnF1ZXN0aW9uID0gc3VydmV5LnF1ZXN0aW9uXG4gICAgc3VydmV5LnNob3dfdG9fdXNlcnMgPSB1c2VyUmVwby5nZXRBbGxVc2VycygpLm1hcCgodXNlcikgPT4gdXNlci51c2VyX2lkKVxuICAgIHN1cnZleS5jbG9zZWQgPSBmYWxzZVxuICAgIHN1cnZleS5idWRnZXQgPSBzdXJ2ZXkuYnVkZ2V0XG4gICAgc3VydmV5LmNwciA9IHN1cnZleS5jcHJcbiAgICBzdXJ2ZXkudmVyaWZpZWRfcmVzID0gW11cblxuICAgIC8vIGFkZCBhbmQgc2F2ZSB1c2VyXG4gICAgc3VydmV5cy5wdXNoKHN1cnZleSk7XG5cbiAgICByZXNwb25zZVJlcG8uY3JlYXRlUmVzcG9uc2Uoc3VydmV5LnN1cnZleV9pZCwgW10pXG4gICAgc2F2ZURhdGEoKVxufVxuXG5cbmZ1bmN0aW9uIGFkZFZhbGlkUmVzcG9uc2Uoc3VydmV5X2lkLCBhbnN3ZXIpIHtcbiAgICB0aGlzX3N1cnZleSA9IGdldFN1cnZleUJ5SWQoc3VydmV5X2lkKVxuICAgIHRoaXNfc3VydmV5LnZlcmlmaWVkX3Jlcy5wdXNoKGFuc3dlcilcbiAgICBpZiAodGhpc19zdXJ2ZXkudmVyaWZpZWRfcmVzLmxlbmd0aCA+PSB0aGlzX3N1cnZleS5idWRnZXQvdGhpc19zdXJ2ZXkuY3ByKXtcbiAgICAgICAgY2xvc2VTdXJ2ZXkoc3VydmV5X2lkKVxuICAgIH1cbiAgICBzYXZlRGF0YSgpXG59XG5cbmZ1bmN0aW9uIGNsb3NlU3VydmV5KHN1cnZleV9pZCkge1xuICAgIHRoaXNfc3VydmV5ID0gZ2V0U3VydmV5QnlJZChzdXJ2ZXlfaWQpXG4gICAgdGhpc19zdXJ2ZXkuY2xvc2VkID0gdHJ1ZTtcbiAgICBzYXZlRGF0YSgpXG59XG5cbmZ1bmN0aW9uIHJlbW92ZVVzZXIoc3VydmV5X2lkLCB1c2VyX2lkKXtcbiAgICB1cnYgPSBzdXJ2ZXlSZXBvLmdldFN1cnZleUJ5SWQoc3VydmV5X2lkKVxuICAgIGNvbnN0IGluZGV4ID0gc3Vydi5zaG93X3RvX3VzZXJzLmluZGV4T2YodXNlcl9pZCk7XG4gICAgZGVsZXRlIHN1cnYuc2hvd190b191c2Vyc1tpbmRleF1cbiAgICBzYXZlRGF0YSgpXG59XG5cbi8vIHByaXZhdGUgaGVscGVyIGZ1bmN0aW9uc1xuZnVuY3Rpb24gc2F2ZURhdGEoKSB7XG4gICAgZnMud3JpdGVGaWxlU3luYygnZGF0YS9zdXJ2ZXlzLmpzb24nLCBKU09OLnN0cmluZ2lmeShzdXJ2ZXlzLCBudWxsLCA0KSk7XG59Il0sIm5hbWVzIjpbInVzZXJSZXBvIiwicmVzcG9uc2VSZXBvIiwiZnMiLCJyZXF1aXJlIiwic3VydmV5cyIsInN1cnZleVJlcG8iLCJnZXRBbGxTdXJ2ZXlzIiwiZ2V0U3VydmV5QnlJZCIsInN1cnZleV9pZCIsImZpbmQiLCJ4IiwidG9TdHJpbmciLCJnZXRTdXJ2ZXlCeVVzZXIiLCJ1c2VyX2lkIiwiZmluZFN1cnZleSIsImNyZWF0ZVN1cnZleSIsImFkZFZhbGlkUmVzcG9uc2UiLCJjbG9zZVN1cnZleSIsImdldFZhbGlkU3VydmV5cyIsInNob3dfdG9fdXNlcnMiLCJpbmNsdWRlcyIsInJlbW92ZVVzZXIiLCJzdXJ2ZXkiLCJzZXNzaW9uIiwibGVuZ3RoIiwiTWF0aCIsIm1heCIsIm1hcCIsImlkIiwidXNlciIsImVtYWlsIiwicXVlc3Rpb24iLCJnZXRBbGxVc2VycyIsImNsb3NlZCIsImJ1ZGdldCIsImNwciIsInZlcmlmaWVkX3JlcyIsInB1c2giLCJjcmVhdGVSZXNwb25zZSIsInNhdmVEYXRhIiwiYW5zd2VyIiwidGhpc19zdXJ2ZXkiLCJ1cnYiLCJpbmRleCIsInN1cnYiLCJpbmRleE9mIiwid3JpdGVGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./helpers/survey-creator.js\n");

/***/ }),

/***/ "(api)/./helpers/user-creator.js":
/*!*********************************!*\
  !*** ./helpers/user-creator.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userRepo\": () => (/* binding */ userRepo)\n/* harmony export */ });\nconst fs = __webpack_require__(/*! fs */ \"fs\");\n// users in JSON file for simplicity, store in a db for production applications\nlet users = __webpack_require__(/*! ../data/users.json */ \"(api)/./data/users.json\");\nconst userRepo = {\n    getAllUsers: ()=>users,\n    getUserById: (user_id1)=>users.find((x1)=>x1.user_id.toString() === user_id1.toString()),\n    createUser,\n    checkPayment,\n    addNewRes,\n    updateResponded,\n    updateVerfied\n};\nfunction checkIfExists(email) {\n    for (x of users){\n        if (x.user_id.toString() === user_id.toString()) return true;\n    }\n    return false;\n}\nfunction createUser(session) {\n    // generate new user id\n    if (!checkIfExists(session)) {\n        const user1 = {\n            user_id: session,\n            money: 0,\n            responses: []\n        };\n        // add and save user\n        users.push(user1);\n        saveData();\n    }\n}\nfunction checkPayment(user_id1) {\n    const user1 = getUserById(user_id1);\n    for (res of user1.responses){\n        if (res.paid == false) {\n            if (res.responded === -1 || res.verified === -1) {\n                res.paid == true;\n            } else if (res.responded === 1 && res.verified === 1) {\n                res.paid == true;\n                user1.money += res.to_pay;\n            }\n        }\n    }\n    saveData();\n}\nfunction addNewRes(user_id1, survey_id) {\n    surv = surveyRepo.getSurveyById(survey_id);\n    this_user = userRepo.getResponseBySurveyId(user_id1);\n    new_user_res = {\n        survey_id: survey_id,\n        responded: 0,\n        verified: 0,\n        paid: false,\n        to_pay: surv.cpr\n    };\n    this_user.responses.push(new_user_res);\n    saveData();\n}\nfunction updateResponded(user_id1, survey_id, value) {\n    user = userRepo.getUserById(user_id1);\n    this_user_res = user.find((x1)=>x1.responses.survey_id.toString() === survey_id.toString());\n    this_user_res.responded = value;\n    saveData();\n}\nfunction updateVerfied(user_id1, survey_id, value) {\n    user = userRepo.getUserById(user_id1);\n    this_user_res = user.find((x1)=>x1.responses.survey_id.toString() === survey_id.toString());\n    this_user_res.verified = value;\n    saveData();\n}\n// private helper functions\nfunction saveData() {\n    fs.writeFileSync(\"data/users.json\", JSON.stringify(users, null, 4));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpc21hLW5leHQvLi9oZWxwZXJzL3VzZXItY3JlYXRvci5qcz82ZGMwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuLy8gdXNlcnMgaW4gSlNPTiBmaWxlIGZvciBzaW1wbGljaXR5LCBzdG9yZSBpbiBhIGRiIGZvciBwcm9kdWN0aW9uIGFwcGxpY2F0aW9uc1xubGV0IHVzZXJzPSByZXF1aXJlKCcuLi9kYXRhL3VzZXJzLmpzb24nKTtcblxuZXhwb3J0IGNvbnN0IHVzZXJSZXBvID0ge1xuICAgIGdldEFsbFVzZXJzOiAoKSA9PiB1c2VycyxcbiAgICBnZXRVc2VyQnlJZDogdXNlcl9pZCA9PiB1c2Vycy5maW5kKHggPT4geC51c2VyX2lkLnRvU3RyaW5nKCkgPT09IHVzZXJfaWQudG9TdHJpbmcoKSksXG4gICAgY3JlYXRlVXNlcixcbiAgICBjaGVja1BheW1lbnQsXG4gICAgYWRkTmV3UmVzLFxuICAgIHVwZGF0ZVJlc3BvbmRlZCwgXG4gICAgdXBkYXRlVmVyZmllZFxufVxuXG5mdW5jdGlvbiBjaGVja0lmRXhpc3RzKGVtYWlsKSB7XG4gICAgZm9yICh4IG9mIHVzZXJzKSB7XG4gICAgICAgIGlmICh4LnVzZXJfaWQudG9TdHJpbmcoKSA9PT0gdXNlcl9pZC50b1N0cmluZygpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWUgXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBjcmVhdGVVc2VyKHNlc3Npb24pIHtcbiAgICAvLyBnZW5lcmF0ZSBuZXcgdXNlciBpZFxuXG4gICAgaWYgKCFjaGVja0lmRXhpc3RzKHNlc3Npb24pKSBcbiAgICB7ICAgXG4gICAgICAgIGNvbnN0IHVzZXIgPSB7dXNlcl9pZDogc2Vzc2lvbiwgbW9uZXk6IDAsIHJlc3BvbnNlczogW119XG5cbiAgICAgICAgLy8gYWRkIGFuZCBzYXZlIHVzZXJcbiAgICAgICAgdXNlcnMucHVzaCh1c2VyKVxuICAgICAgICBzYXZlRGF0YSgpXG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrUGF5bWVudCh1c2VyX2lkKXtcbiAgICBjb25zdCB1c2VyID0gZ2V0VXNlckJ5SWQodXNlcl9pZClcbiAgICBmb3IgKHJlcyBvZiB1c2VyLnJlc3BvbnNlcykge1xuICAgICAgICBpZiAocmVzLnBhaWQgPT0gZmFsc2Upe1xuICAgICAgICAgICAgaWYgKHJlcy5yZXNwb25kZWQ9PT0tMSB8fCByZXMudmVyaWZpZWQgPT09IC0xKXtcbiAgICAgICAgICAgICAgICByZXMucGFpZCA9PSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXMucmVzcG9uZGVkPT09MSAmJiByZXMudmVyaWZpZWQgPT09IDEpe1xuICAgICAgICAgICAgICAgIHJlcy5wYWlkID09IHRydWVcbiAgICAgICAgICAgICAgICB1c2VyLm1vbmV5ICs9IHJlcy50b19wYXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzYXZlRGF0YSgpXG59XG5cbmZ1bmN0aW9uIGFkZE5ld1Jlcyh1c2VyX2lkLCBzdXJ2ZXlfaWQpe1xuICAgIHN1cnYgPSBzdXJ2ZXlSZXBvLmdldFN1cnZleUJ5SWQoc3VydmV5X2lkKVxuICAgIHRoaXNfdXNlciA9IHVzZXJSZXBvLmdldFJlc3BvbnNlQnlTdXJ2ZXlJZCh1c2VyX2lkKVxuICAgIG5ld191c2VyX3JlcyA9IHtzdXJ2ZXlfaWQ6IHN1cnZleV9pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uZGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogMCwgXG4gICAgICAgICAgICAgICAgICAgIHBhaWQ6IGZhbHNlLCBcbiAgICAgICAgICAgICAgICAgICAgdG9fcGF5OiBzdXJ2LmNwcn1cbiAgICB0aGlzX3VzZXIucmVzcG9uc2VzLnB1c2gobmV3X3VzZXJfcmVzKVxuICAgIHNhdmVEYXRhKClcbn1cblxuZnVuY3Rpb24gdXBkYXRlUmVzcG9uZGVkKHVzZXJfaWQsIHN1cnZleV9pZCwgdmFsdWUpe1xuICAgIHVzZXIgPSB1c2VyUmVwby5nZXRVc2VyQnlJZCh1c2VyX2lkKVxuICAgIHRoaXNfdXNlcl9yZXMgPSB1c2VyLmZpbmQoeCA9PiB4LnJlc3BvbnNlcy5zdXJ2ZXlfaWQudG9TdHJpbmcoKSA9PT0gc3VydmV5X2lkLnRvU3RyaW5nKCkpXG4gICAgdGhpc191c2VyX3Jlcy5yZXNwb25kZWQgPSB2YWx1ZVxuICAgIHNhdmVEYXRhKClcbn1cblxuZnVuY3Rpb24gdXBkYXRlVmVyZmllZCh1c2VyX2lkLCBzdXJ2ZXlfaWQsIHZhbHVlKXtcbiAgICB1c2VyID0gdXNlclJlcG8uZ2V0VXNlckJ5SWQodXNlcl9pZClcbiAgICB0aGlzX3VzZXJfcmVzID0gdXNlci5maW5kKHggPT4geC5yZXNwb25zZXMuc3VydmV5X2lkLnRvU3RyaW5nKCkgPT09IHN1cnZleV9pZC50b1N0cmluZygpKVxuICAgIHRoaXNfdXNlcl9yZXMudmVyaWZpZWQgPSB2YWx1ZVxuICAgIHNhdmVEYXRhKClcbn1cblxuLy8gcHJpdmF0ZSBoZWxwZXIgZnVuY3Rpb25zXG5mdW5jdGlvbiBzYXZlRGF0YSgpIHtcbiAgICBmcy53cml0ZUZpbGVTeW5jKCdkYXRhL3VzZXJzLmpzb24nLCBKU09OLnN0cmluZ2lmeSh1c2VycywgbnVsbCwgNCkpXG59Il0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInVzZXJzIiwidXNlclJlcG8iLCJnZXRBbGxVc2VycyIsImdldFVzZXJCeUlkIiwidXNlcl9pZCIsImZpbmQiLCJ4IiwidG9TdHJpbmciLCJjcmVhdGVVc2VyIiwiY2hlY2tQYXltZW50IiwiYWRkTmV3UmVzIiwidXBkYXRlUmVzcG9uZGVkIiwidXBkYXRlVmVyZmllZCIsImNoZWNrSWZFeGlzdHMiLCJlbWFpbCIsInNlc3Npb24iLCJ1c2VyIiwibW9uZXkiLCJyZXNwb25zZXMiLCJwdXNoIiwic2F2ZURhdGEiLCJyZXMiLCJwYWlkIiwicmVzcG9uZGVkIiwidmVyaWZpZWQiLCJ0b19wYXkiLCJzdXJ2ZXlfaWQiLCJzdXJ2Iiwic3VydmV5UmVwbyIsImdldFN1cnZleUJ5SWQiLCJ0aGlzX3VzZXIiLCJnZXRSZXNwb25zZUJ5U3VydmV5SWQiLCJuZXdfdXNlcl9yZXMiLCJjcHIiLCJ2YWx1ZSIsInRoaXNfdXNlcl9yZXMiLCJ3cml0ZUZpbGVTeW5jIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./helpers/user-creator.js\n");

/***/ }),

/***/ "(api)/./pages/api/surveys/survey-api.js":
/*!*****************************************!*\
  !*** ./pages/api/surveys/survey-api.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _helpers_survey_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../helpers/survey-creator */ \"(api)/./helpers/survey-creator.js\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\nfunction handler(req, res) {\n    switch(req.method){\n        case \"PUT\":\n            return postSurvey();\n        case \"GET\":\n            return getSurvey();\n        case \"UPDATE\":\n            return updateSurvey();\n        default:\n            return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    function postSurvey() {\n        try {\n            const email = JSON.parse(req.body)[\"session\"][\"session\"][\"user\"][\"email\"];\n            const data = JSON.parse(req.body)[\"data\"][\"data\"];\n            console.log(email);\n            console.log(data);\n            _helpers_survey_creator__WEBPACK_IMPORTED_MODULE_0__.surveyRepo.createSurvey(req.query.survey, req.query.session);\n            return res.status(200).json({});\n        } catch (error) {\n            return res.status(400).json({\n                message: error\n            });\n        }\n    }\n    function getSurvey() {\n        const survey = _helpers_survey_creator__WEBPACK_IMPORTED_MODULE_0__.surveyRepo.getValidSurveys(req.query.user_id);\n        return res.status(200).json(survey);\n    }\n    function updateSurvey() {\n        try {\n            _helpers_survey_creator__WEBPACK_IMPORTED_MODULE_0__.surveyRepo.removeUser(req.query.survey_id, req.query.user_id);\n            return res.status(200).json({});\n        } catch (error) {\n            return res.status(400).json({\n                message: error\n            });\n        }\n    }\n/*\n    function deleteSurvey() {\n        surveyRepo.delete(req.query.id);\n        return res.status(200).json({});\n    }\n    */ }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc3VydmV5cy9zdXJ2ZXktYXBpLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEO0FBRTNELGlFQUFlQyxPQUFPQSxFQUFDO0FBRXZCLFNBQVNBLFFBQVFDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQ3ZCLE9BQVFELElBQUlFLE1BQU07UUFDZCxLQUFLO1lBQ0QsT0FBT0M7UUFDWCxLQUFLO1lBQ0QsT0FBT0M7UUFDWCxLQUFLO1lBQ0QsT0FBT0M7UUFDWDtZQUNJLE9BQU9KLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUVQLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDckU7SUFFQSxTQUFTQyxhQUFhO1FBQ2xCLElBQUk7WUFDQSxNQUFNSyxRQUFRQyxLQUFLQyxLQUFLLENBQUNWLElBQUlXLElBQUksQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVE7WUFDekUsTUFBTUMsT0FBT0gsS0FBS0MsS0FBSyxDQUFDVixJQUFJVyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTztZQUVqREUsUUFBUUMsR0FBRyxDQUFDTjtZQUNaSyxRQUFRQyxHQUFHLENBQUNGO1lBRVpkLDRFQUF1QixDQUFDRSxJQUFJZ0IsS0FBSyxDQUFDQyxNQUFNLEVBQUVqQixJQUFJZ0IsS0FBSyxDQUFDRSxPQUFPO1lBQzNELE9BQU9qQixJQUFJSyxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDLENBQUM7UUFDakMsRUFBRSxPQUFPQyxPQUFPO1lBQ1osT0FBT25CLElBQUlLLE1BQU0sQ0FBQyxLQUFLYSxJQUFJLENBQUM7Z0JBQUVFLFNBQVNEO1lBQU07UUFDakQ7SUFDSjtJQUVBLFNBQVNoQixZQUFZO1FBQ2pCLE1BQU1hLFNBQVNuQiwrRUFBMEIsQ0FBQ0UsSUFBSWdCLEtBQUssQ0FBQ08sT0FBTztRQUMzRCxPQUFPdEIsSUFBSUssTUFBTSxDQUFDLEtBQUthLElBQUksQ0FBQ0Y7SUFDaEM7SUFFQSxTQUFTWixlQUFlO1FBQ3BCLElBQUk7WUFDQVAsMEVBQXFCLENBQUNFLElBQUlnQixLQUFLLENBQUNTLFNBQVMsRUFBRXpCLElBQUlnQixLQUFLLENBQUNPLE9BQU87WUFDNUQsT0FBT3RCLElBQUlLLE1BQU0sQ0FBQyxLQUFLYSxJQUFJLENBQUMsQ0FBQztRQUNqQyxFQUFFLE9BQU9DLE9BQU87WUFDWixPQUFPbkIsSUFBSUssTUFBTSxDQUFDLEtBQUthLElBQUksQ0FBQztnQkFBRUUsU0FBU0Q7WUFBTTtRQUNqRDtJQUNKO0FBRUE7Ozs7O0lBS0EsR0FDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXNtYS1uZXh0Ly4vcGFnZXMvYXBpL3N1cnZleXMvc3VydmV5LWFwaS5qcz8zNGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7c3VydmV5UmVwb30gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9zdXJ2ZXktY3JlYXRvcic7XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7XG5cbmZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgICAgY2FzZSAnUFVUJzpcbiAgICAgICAgICAgIHJldHVybiBwb3N0U3VydmV5KCk7XG4gICAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgICAgICByZXR1cm4gZ2V0U3VydmV5KCk7XG4gICAgICAgIGNhc2UgJ1VQREFURSc6XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlU3VydmV5KCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvc3RTdXJ2ZXkoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbWFpbCA9IEpTT04ucGFyc2UocmVxLmJvZHkpW1wic2Vzc2lvblwiXVtcInNlc3Npb25cIl1bXCJ1c2VyXCJdW1wiZW1haWxcIl1cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlcS5ib2R5KVtcImRhdGFcIl1bXCJkYXRhXCJdXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVtYWlsKVxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcblxuICAgICAgICAgICAgc3VydmV5UmVwby5jcmVhdGVTdXJ2ZXkocmVxLnF1ZXJ5LnN1cnZleSwgcmVxLnF1ZXJ5LnNlc3Npb24pXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe30pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTdXJ2ZXkoKSB7XG4gICAgICAgIGNvbnN0IHN1cnZleSA9IHN1cnZleVJlcG8uZ2V0VmFsaWRTdXJ2ZXlzKHJlcS5xdWVyeS51c2VyX2lkKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHN1cnZleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlU3VydmV5KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3VydmV5UmVwby5yZW1vdmVVc2VyKHJlcS5xdWVyeS5zdXJ2ZXlfaWQsIHJlcS5xdWVyeS51c2VyX2lkKTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7fSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgZnVuY3Rpb24gZGVsZXRlU3VydmV5KCkge1xuICAgICAgICBzdXJ2ZXlSZXBvLmRlbGV0ZShyZXEucXVlcnkuaWQpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe30pO1xuICAgIH1cbiAgICAqL1xufSJdLCJuYW1lcyI6WyJzdXJ2ZXlSZXBvIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInBvc3RTdXJ2ZXkiLCJnZXRTdXJ2ZXkiLCJ1cGRhdGVTdXJ2ZXkiLCJzdGF0dXMiLCJlbmQiLCJlbWFpbCIsIkpTT04iLCJwYXJzZSIsImJvZHkiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZVN1cnZleSIsInF1ZXJ5Iiwic3VydmV5Iiwic2Vzc2lvbiIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRWYWxpZFN1cnZleXMiLCJ1c2VyX2lkIiwicmVtb3ZlVXNlciIsInN1cnZleV9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/surveys/survey-api.js\n");

/***/ }),

/***/ "(api)/./data/responses.json":
/*!*****************************!*\
  !*** ./data/responses.json ***!
  \*****************************/
/***/ ((module) => {

module.exports = [];

/***/ }),

/***/ "(api)/./data/surveys.json":
/*!***************************!*\
  !*** ./data/surveys.json ***!
  \***************************/
/***/ ((module) => {

module.exports = [];

/***/ }),

/***/ "(api)/./data/users.json":
/*!*************************!*\
  !*** ./data/users.json ***!
  \*************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"user_id":"stutiraizada2000@gmail.com","money":0,"responses":[]}]');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/surveys/survey-api.js"));
module.exports = __webpack_exports__;

})();